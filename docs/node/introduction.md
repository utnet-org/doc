---
sidebar_position: 1
---

# 概览


## 概述

Coffer共识机制是基于集成电路（IC）或芯片算力的共识算法——即芯片证明（Proof of IC, PoIC）。它依据参与者的芯片或IC的贡献权重，在带权重的候选节点中进行随机选择，确定每个区块的签名者。该机制通过结合芯片权重和可验证随机函数（VRF），提高了区块链网络的安全性和有效性。

## Coffer数据结构

Coffer共识机制核心是其数据结构，它存储在状态数据库（StateDB）中，包含以下主要元素：

1. **SuperAccount**：超级账户地址，作为网络中的主要授权实体。
2. **Signers**：一组候选签名者的地址和权重。每个签名者由其Utility地址和对应的权重（即Power）组成。
3. **TotalPower**：网络中所有候选签名者权重的总和，用于计算各个签名者被选中的概率。

### 存储与管理

Coffer数据结构存储在状态数据库（StateDB）中，每个区块的状态变更都会影响这一数据结构。StateDB负责管理和存储区块链的状态信息，包括账户余额、VM状态以及Coffer数据结构。

## 定制交易类型

Coffer共识机制引入了定制的交易类型，用于处理特定的共识相关操作。这些定制交易包括但不限于：

1. **SuperAccountUpdateTx**：更新超级账户地址的交易。
2. **SignerRegistrationTx**：注册新的签名者及其权重的交易。
3. **SignerDeregistrationTx**：注销现有签名者的交易。

这些定制交易直接影响Coffer数据结构的状态，并且只能由超级账户发起。

## 新共识机制

### 算法流程

1. **签名者选择**：在生成每个区块时，系统会利用VRF算法从带权重的候选签名者列表中随机选择一个签名者。
2. **区块验证**：被选中的签名者负责生成新的区块，并对其进行签名。其他节点验证签名的有效性和区块的正确性。
3. **权重更新**：通过特定的交易，超级账户可以更新签名者的权重，影响其被选中的概率。

### 安全性

Coffer共识机制通过结合权威性和随机性来确保系统的安全。VRF算法提供了无法预测和操纵的随机性，而权重系统则确保了网络中贡献度高的节点更可能被选为签名者。

## 结语

Coffer共识机制提供了一个既高效又安全的区块链网络。通过其创新的共识算法和定制的交易类型，Coffer适用于需要高度安全性和有效性的各种应用场景。

