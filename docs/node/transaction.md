# 自定义交易

## 概述

Utility区块链引入了一系列自定义交易，旨在与区块链的独特功能相互作用，特别是Coffer共识机制和PoIC（集成电路的证明）概念。这些交易促进了更新超级账户、修改签名者数据和调整网络中权重的操作。

## 交易类型和逻辑

### SuperAccountUpdateTx

- **目的**：更新管理Coffer的超级账户。
- **字段**：
  - `OldSuperAccount`：当前超级账户的地址。
  - `NewSuperAccount`：新超级账户的地址。
  - `Nonce`：旧超级账户的交易计数。
  - `GasLimit` 和 `GasPrice`：Utility交易字段。
  - `Signature`：交易的数字签名。

### SignerModificationTx

- **目的**：添加、移除或更新签名者及其相关权力。
- **字段**：
  - `SignerAddress`：要修改的签名者地址。
  - `Power`：签名者的权重或力量。
  - `Action`：表明是添加、移除还是更新签名者。
  - `Nonce`、`GasLimit`、`GasPrice`、`Signature`：与SuperAccountUpdateTx相同。

## 签署交易

1. **序列化**：除签名外的交易数据进行序列化。
2. **哈希**：序列化数据使用密码学哈希函数进行哈希处理。
3. **签名**：使用发送者（超级账户或授权账户）的私钥对哈希进行签名，通常通过像MetaMask这样的钱包界面。

## 提交交易

使用Utility交易API将交易发送到网络，载荷包含序列化和签名的自定义交易数据。

## 验证过程

1. **签名验证**：接收到交易后，节点验证签名以认证发送者。
2. **逻辑验证**：节点检查交易逻辑，确保其符合相应交易类型的规则（例如，SuperAccountUpdateTx或SignerModificationTx）。
3. **状态更新**：如果有效，应用交易，更新区块链状态，如超级账户地址或签名者列表。

## 包含在区块中

有效交易被当前区块签名者包含在即将到来的区块中，该签名者通过基于VRF的加权随机选择过程选择。包含遵循Utility区块构建规则，并添加了PoIC特定逻辑。

## 结论

这些自定义交易是维护Utility区块链的动态和去中心化本质的核心。它们确保了在管理网络的共识机制和签名者人口方面的灵活性和控制。
